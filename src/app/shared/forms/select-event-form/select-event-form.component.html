<ion-grid>
  <ion-row class="ion-justify-content-center">
    <ion-col size="12" class="ion-text-center">
      <h2 class="ion-no-margin ion-color-success" *ngIf="!selectedEvent">Select Event</h2>
      <h2 class="ion-no-margin ion-color-success" *ngIf="selectedEvent">Event</h2>
    </ion-col>
  </ion-row>
</ion-grid>

<form (ngSubmit)="processSubmit()" [formGroup]="group" novalidate role="form">

  <!-- Search Bar & List -->
  <ion-row class="ion-justify-content-center ion-text-center" *ngIf="!selectedEvent">
    <ion-col size="12">
      <ion-item lines="none" xmlns="http://www.w3.org/1999/html">
        <ion-searchbar color="light" [debounce]="1000" (ionInput)="handleInput($event)"></ion-searchbar>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row class="ion-justify-content-center ion-text-center" *ngIf="!selectedEvent">
    <ion-col class="ion-padding-top ion-margin-top ion-margin-bottom" size="12">

      <ion-list [inset]="false" class="bg-black">
        <ion-item class="table-header" *ngIf="!selectedEvent">
          <ion-label class="ion-text-wrap ion-margin">
            <ion-row class="ion-text-left">
              <ion-col size="5" class="text"><strong>Event</strong></ion-col>
              <ion-col size="4"><strong>City</strong></ion-col>
              <ion-col size="3"><strong>Date</strong></ion-col>
            </ion-row>
          </ion-label>
        </ion-item>

        <ion-item *ngFor="let result of results" (click)="choose(result)" class="dark-item-m">
          <ion-label class=" ion-margin">
            <ion-row class="ion-text-left">
              <ion-col size="5" class="ion-text-wrap">{{ result.name }}</ion-col>
              <ion-col size="4">{{ result.eventCity }}</ion-col>
              <ion-col size="3">{{ result.eventDate }}</ion-col>
            </ion-row>
          </ion-label>
        </ion-item>
      </ion-list>

    </ion-col>
  </ion-row>


  <!-- Event Details -->
  <ng-container *ngIf="selectedEvent">
    <ion-grid class="ion-padding">
      <ion-row class="ion-justify-content-center">
        <ion-col size="12" class="ion-padding-top ion-padding-bottom ion-padding">
          <!-- <h2 class="ion-no-margin">Event</h2> -->
          <ion-button fill="clear" (click)="reset($event)" class="ion-color-success">
            <ion-icon name="arrow-back"></ion-icon>
            Back to search
          </ion-button>
        </ion-col>
      </ion-row>

      <ion-row class="ion-justify-content-center">
        <ion-col class="ion-padding-top" size="12">
          <!-- Selected Event -->
          <ion-item>
            <ion-label class="ion-text-wrap ion-margin">
              <div><strong>Event</strong></div>
              <div>{{selectedEvent.name}}</div>
            </ion-label>
          </ion-item>
          <ion-item>
            <ion-label class="ion-text-wrap ion-margin">
              <div><strong>City</strong></div>
              <div>{{selectedEvent.eventCity || "N/A"}}</div>
            </ion-label>
          </ion-item>
          <ion-item>
            <ion-label class="ion-text-wrap ion-margin">
              <div><strong>Date</strong></div>
              <div>{{selectedEvent.eventDate}}</div>
            </ion-label>
          </ion-item>
          <ion-item>
            <ion-label class="ion-text-wrap ion-margin">
              <div><strong>Summary</strong></div>
              <div>{{tourDateSummary}}</div>
              <!--            <div class="ion-color-success" [innerHTML]="tourDateListsSummary"></div>-->
            </ion-label>
          </ion-item>

        </ion-col>
      </ion-row>

      <ion-row class="ion-justify-content-center ion-text-center">
        <ion-col class="ion-padding-top ion-margin-top" size="12">
          <div><h3 class="ion-color-success">Guest Lists</h3></div>
          <!--                <ion-button expand="block" color="success" (click)="goCheckIn()">Check-in Guests</ion-button>-->
        </ion-col>
      </ion-row>

      <ion-row class="ion-justify-content-center ion-text-center">
        <ion-col class="ion-padding-top ion-margin-top ion-margin-bottom" size="12">
          <app-event-guest-lists [selectedEvent]="selectedEvent"
                                 [guestLists]="selectedEvent.summary.lists"></app-event-guest-lists>
        </ion-col>
      </ion-row>

      <ion-row class="ion-justify-content-center ion-text-center">
        <ion-col class="ion-padding-top ion-margin-top ion-margin-bottom" size="12">
          <ion-button (click)="showQr(true)" color="medium" *ngIf="!qrCodeShowing">&nbsp; Show Event QR-Code &nbsp;</ion-button>
          <ion-button (click)="showQr(false)" color="medium" *ngIf="qrCodeShowing">&nbsp; Hide Event QR-Code &nbsp;</ion-button>
        </ion-col>
      </ion-row>
      <ion-row class="ion-justify-content-center ion-text-center">
        <ion-col class="ion-padding-top ion-margin-top" size="12">
          <ng-container *ngIf="this.selectedEvent && qrCodeShowing">
            <app-event-qr-code [code]="selectedEvent.qrCode"></app-event-qr-code>
          </ng-container>
        </ion-col>
      </ion-row>
    </ion-grid>

  </ng-container>

</form>

